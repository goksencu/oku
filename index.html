<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TÃ¼rkÃ§e Okuma Ã–ÄŸreniyorum</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            -webkit-tap-highlight-color: transparent; /* Disables the grey tap highlight on mobile */
        }
    </style>
</head>
<body class="bg-[#cde7ec] min-h-screen flex items-center justify-center p-4 sm:p-6">

    <main class="w-full max-w-4xl mx-auto">
        <!-- Kelime YÃ¶netimi -->
        <div class="bg-white rounded-lg shadow-md p-4 mb-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-bold text-[#00424a]">ğŸ“ Kelime YÃ¶netimi</h2>
                <button id="toggle-word-editor" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors">
                    âœï¸ Kelimeleri DÃ¼zenle
                </button>
            </div>
            
            <!-- Kelime EditÃ¶rÃ¼ (BaÅŸlangÄ±Ã§ta gizli) -->
            <div id="word-editor" class="hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="word-input" class="block text-sm font-medium text-gray-700 mb-2">Yeni Kelime:</label>
                        <input type="text" id="word-input" placeholder="Ã–rn: Bilgisayar" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#00424a] focus:border-transparent">
                    </div>
                    <div>
                        <label for="syllables-input" class="block text-sm font-medium text-gray-700 mb-2">
                            Heceler (virgÃ¼lle ayÄ±rÄ±n):
                            <button id="auto-syllable" type="button" class="ml-2 text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">
                                ğŸ¤– Otomatik AyÄ±r
                            </button>
                        </label>
                        <input type="text" id="syllables-input" placeholder="Ã–rn: An,ne veya ğŸ¤– butonunu kullan" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#00424a] focus:border-transparent">
                        <div id="syllable-warning" class="hidden mt-1 text-xs text-orange-600">
                            âš ï¸ Otomatik heceleme hata yapabilir. LÃ¼tfen kontrol edin ve gerekirse dÃ¼zenleyin.
                        </div>
                    </div>
                </div>
                <div class="flex gap-2 mb-4 flex-wrap">
                    <button id="add-word" class="bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors">
                        â• Kelime Ekle
                    </button>
                    <button id="generate-random-words" class="bg-purple-500 text-white px-4 py-2 rounded-md hover:bg-purple-600 transition-colors">
                        ğŸ² Rastgele 10 Kelime
                    </button>
                    <button id="reset-words" class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors">
                        ğŸ”„ VarsayÄ±lan Kelimeleri YÃ¼kle
                    </button>
                    <button id="clear-all-words" class="bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors">
                        ğŸ—‘ï¸ TÃ¼mÃ¼nÃ¼ Temizle
                    </button>
                </div>
                
                <!-- KayÄ±t Durumu -->
                <div class="mb-4 p-2 bg-blue-50 rounded-md">
                    <div class="flex justify-between items-center text-sm">
                        <span id="storage-status" class="text-blue-700">ğŸ’¾ Otomatik kayÄ±t aktif</span>
                        <button id="manual-save" class="text-blue-600 hover:text-blue-800 underline">El ile kaydet</button>
                    </div>
                </div>

                <!-- Mevcut Kelimeler Listesi -->
                <div class="border-t pt-4">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-md font-semibold text-gray-700">Mevcut Kelimeler:</h3>
                        <span id="word-count" class="text-sm text-gray-500">0 kelime</span>
                    </div>
                    <div id="current-words-list" class="max-h-32 overflow-y-auto bg-gray-50 p-2 rounded-md">
                        <!-- Kelimeler buraya listelenecek -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Ses AyarlarÄ± MenÃ¼sÃ¼ -->
        <div class="bg-white rounded-lg shadow-md p-4 mb-6">
            <h2 class="text-lg font-bold text-[#00424a] mb-4">ğŸ”Š Ses AyarlarÄ±</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="voice-select" class="block text-sm font-medium text-gray-700 mb-2">Ses SeÃ§imi:</label>
                    <select id="voice-select" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#00424a] focus:border-transparent">
                        <option value="">Sesler yÃ¼kleniyor...</option>
                    </select>
                </div>
                <div>
                    <label for="speed-select" class="block text-sm font-medium text-gray-700 mb-2">Okuma HÄ±zÄ±:</label>
                    <select id="speed-select" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#00424a] focus:border-transparent">
                        <option value="0.5">Ã‡ok YavaÅŸ</option>
                        <option value="0.7" selected>YavaÅŸ</option>
                        <option value="0.85">Normal</option>
                        <option value="1.0">HÄ±zlÄ±</option>
                        <option value="1.2">Ã‡ok HÄ±zlÄ±</option>
                    </select>
                </div>
            </div>
            <div class="mt-4 flex gap-2 items-center">
                <button id="test-voice" class="bg-[#00424a] text-white px-4 py-2 rounded-md hover:bg-[#003c44] transition-colors">
                    ğŸµ Sesi Test Et
                </button>
                <button id="refresh-voices" class="bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors">
                    ğŸ”„ Sesleri Yenile
                </button>
                <div class="text-sm text-gray-600">
                    <span id="voice-status">ğŸ“¢ Sesler hazÄ±rlanÄ±yor...</span>
                </div>
            </div>
        </div>

        <h1 class="text-4xl sm:text-5xl md:text-6xl font-black text-[#00424a] text-center mb-8 sm:mb-12">
            TÃ¼rkÃ§e Okuma Ã–ÄŸreniyorum
        </h1>
        
        <div id="words-container" class="grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8 mb-8">
            <!-- Words will be dynamically inserted here by JavaScript -->
        </div>
        
        <!-- EÄŸlenceli Yenileme Butonu - En Altta -->
        <div class="flex justify-center mt-8 mb-6">
            <button id="fun-refresh" class="bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-bold py-4 px-8 rounded-full shadow-lg transform transition-all duration-200 hover:scale-105 active:scale-95 animate-pulse text-lg">
                ğŸŒŸ Kelimeleri Yenile! ğŸ¨
            </button>
        </div>
    </main>

    <script>
        // VarsayÄ±lan kelimeler
        const defaultWords = [
            {
                "word": "Anne",
                "syllables": [
                    { "text": "An", "color": "red" },
                    { "text": "ne", "color": "blue" }
                ]
            },
            {
                "word": "Baba",
                "syllables": [
                    { "text": "Ba", "color": "red" },
                    { "text": "ba", "color": "blue" }
                ]
            },
            {
                "word": "Efe",
                "syllables": [
                    { "text": "E", "color": "red" },
                    { "text": "fe", "color": "blue" }
                ]
            },
            {
                "word": "Okul",
                "syllables": [
                    { "text": "O", "color": "red" },
                    { "text": "kul", "color": "blue" }
                ]
            },
            {
                "word": "Kitap",
                "syllables": [
                    { "text": "Ki", "color": "red" },
                    { "text": "tap", "color": "blue" }
                ]
            },
            {
                "word": "Defter",
                "syllables": [
                    { "text": "Def", "color": "red" },
                    { "text": "ter", "color": "blue" }
                ]
            }
        ];

        // Mevcut kelimeler (localStorage'dan yÃ¼klenecek veya varsayÄ±lan kullanÄ±lacak)
        let currentWords = [];

        document.addEventListener('DOMContentLoaded', () => {
            const wordsContainer = document.getElementById('words-container');
            const voiceSelect = document.getElementById('voice-select');
            const speedSelect = document.getElementById('speed-select');
            const testVoiceBtn = document.getElementById('test-voice');
            const refreshVoicesBtn = document.getElementById('refresh-voices');
            const voiceStatus = document.getElementById('voice-status');
            
            // Kelime editÃ¶rÃ¼ elementleri
            const toggleWordEditor = document.getElementById('toggle-word-editor');
            const wordEditor = document.getElementById('word-editor');
            const wordInput = document.getElementById('word-input');
            const syllablesInput = document.getElementById('syllables-input');
            const addWordBtn = document.getElementById('add-word');
            const generateRandomWordsBtn = document.getElementById('generate-random-words');
            const resetWordsBtn = document.getElementById('reset-words');
            const clearAllWordsBtn = document.getElementById('clear-all-words');
            const currentWordsList = document.getElementById('current-words-list');
            const storageStatus = document.getElementById('storage-status');
            const manualSaveBtn = document.getElementById('manual-save');
            const wordCount = document.getElementById('word-count');
            const autoSyllableBtn = document.getElementById('auto-syllable');
            const syllableWarning = document.getElementById('syllable-warning');
            const funRefreshBtn = document.getElementById('fun-refresh');
            
            let selectedVoice = null;
            let speechRate = 0.7;
            let allVoices = [];
            let voiceLoadAttempts = 0;
            let syllableIdCounter = 1;

            // TÃ¼rkÃ§e bÃ¼yÃ¼k harf fonksiyonu
            function toTurkishUpperCase(str) {
                if (!str || str.length === 0) return str;
                
                const turkishMap = {
                    'i': 'Ä°',
                    'Ä±': 'I',
                    'ÄŸ': 'Ä',
                    'Ã¼': 'Ãœ',
                    'ÅŸ': 'Å',
                    'Ã¶': 'Ã–',
                    'Ã§': 'Ã‡'
                };
                
                const firstChar = str.charAt(0);
                const upperChar = turkishMap[firstChar] || firstChar.toUpperCase();
                
                return upperChar + str.slice(1);
            }

            // GeliÅŸmiÅŸ TÃ¼rkÃ§e otomatik heceleme fonksiyonu
            function automaticSyllableBreak(word) {
                const originalWord = word.trim();
                const cleanWord = originalWord.toLowerCase();
                const vowels = 'aeÄ±ioÃ¶uÃ¼';
                const syllables = [];
                let currentSyllable = '';
                
                // Basit kelimeler iÃ§in Ã¶nceden tanÄ±mlÄ± hecelemeler
                const knownWords = {
                    'anne': ['An', 'ne'],
                    'baba': ['Ba', 'ba'],
                    'efe': ['E', 'fe'],
                    'okul': ['O', 'kul'],
                    'kitap': ['Ki', 'tap'],
                    'defter': ['Def', 'ter'],
                    'Ã¶ÄŸretmen': ['Ã–ÄŸ', 'ret', 'men'],
                    'bilgisayar': ['Bil', 'gi', 'sa', 'yar'],
                    'Ã§iÃ§ekler': ['Ã‡i', 'Ã§ek', 'ler'],
                    'cumhuriyet': ['Cum', 'hu', 'ri', 'yet']
                };

                // Bilinen kelimeler iÃ§in doÄŸrudan dÃ¶n
                if (knownWords[cleanWord]) {
                    return knownWords[cleanWord];
                }
                
                for (let i = 0; i < cleanWord.length; i++) {
                    const char = cleanWord[i];
                    const nextChar = cleanWord[i + 1];
                    const nextNextChar = cleanWord[i + 2];
                    
                    currentSyllable += char;
                    
                    // Sesli harf kontrolÃ¼
                    const isVowel = vowels.includes(char);
                    const nextIsVowel = nextChar && vowels.includes(nextChar);
                    
                    // Hece sonu belirleme kurallarÄ±
                    let shouldBreak = false;
                    
                    if (isVowel && nextChar && !nextIsVowel) {
                        // Sesli + sessiz durumu
                        if (nextNextChar) {
                            if (vowels.includes(nextNextChar)) {
                                // Ses-li + ses-siz + ses-li: hece sonu
                                shouldBreak = true;
                            } else {
                                // Sesli + sessiz + sessiz: Ã§oÄŸunlukla hece devam eder
                                const nextNextNextChar = cleanWord[i + 3];
                                if (nextNextNextChar && vowels.includes(nextNextNextChar)) {
                                    // Ä°ki sessiz harf varsa, ilkini al
                                    shouldBreak = false;
                                }
                            }
                        }
                    }
                    
                    // Ã‡ift sessiz harflerde ilkini Ã¶nceki heceye ver  
                    if (!isVowel && nextChar && !nextIsVowel) {
                        if (nextNextChar && vowels.includes(nextNextChar)) {
                            shouldBreak = true;
                        }
                    }
                    
                    if (shouldBreak && i < cleanWord.length - 1) {
                        syllables.push(currentSyllable);
                        currentSyllable = '';
                    }
                }
                
                // Son heceyi ekle
                if (currentSyllable) {
                    syllables.push(currentSyllable);
                }
                
                // BoÅŸ heceleri temizle
                const filteredSyllables = syllables.filter(syl => syl.trim().length > 0);
                
                // Ä°lk harfi bÃ¼yÃ¼k yap, diÄŸerlerini kÃ¼Ã§Ã¼k bÄ±rak
                return filteredSyllables.map((syl, index) => {
                    if (index === 0) {
                        return toTurkishUpperCase(syl);
                    }
                    return syl.toLowerCase();
                });
            }

            // Rastgele kelime havuzu - Sadece TÃ¼rkÃ§e kelimeler
            const randomWordPool = [
                // Meyveler
                'elma', 'armut', 'muz', 'Ã¼zÃ¼m', 'portakal', 'Ã§ilek', 'kiraz', 'ÅŸeftali', 
                'kavun', 'karpuz', 'ayva', 'nar', 'incir', 'erik', 'kayÄ±sÄ±', 'limon',
                
                // Hayvanlar
                'kedi', 'kÃ¶pek', 'kuÅŸ', 'balÄ±k', 'tavÅŸan', 'aslan', 'fil', 'kaplan',
                'kartal', 'gÃ¼vercin', 'koyun', 'keÃ§i', 'inek', 'at', 'eÅŸek', 'domuz',
                'ayÄ±', 'kurt', 'tilki', 'fare', 'hamster', 'papaÄŸan', 'balina', 'yunus',
                
                // Ev eÅŸyalarÄ±
                'ev', 'masa', 'sandalye', 'yatak', 'dolap', 'kapÄ±', 'pencere', 'lamba',
                'halÄ±', 'yastÄ±k', 'battaniye', 'ayna', 'saat', 'telefon', 'televizyon',
                
                // Okul malzemeleri
                'kalem', 'silgi', 'defter', 'Ã§anta', 'tahta', 'kitap', 'boyama', 'makas',
                'yapÄ±ÅŸtÄ±rÄ±cÄ±', 'cetvel', 'pergel', 'hesap', 'Ã¶dev', 'sÄ±nÄ±f', 'Ã¶ÄŸretmen',
                
                // UlaÅŸÄ±m araÃ§larÄ±
                'araba', 'otobÃ¼s', 'tren', 'gemi', 'uÃ§ak', 'bisiklet', 'motosiklet',
                'kamyon', 'taksi', 'minibÃ¼s', 'tramvay', 'metro', 'helikopter',
                
                // DoÄŸa
                'gÃ¼neÅŸ', 'ay', 'yÄ±ldÄ±z', 'bulut', 'yaÄŸmur', 'kar', 'rÃ¼zgar', 'deniz',
                'daÄŸ', 'orman', 'gÃ¶l', 'nehir', 'Ã§ay', 'ada', 'kum', 'taÅŸ',
                
                // Bitkiler
                'Ã§iÃ§ek', 'aÄŸaÃ§', 'yaprak', 'dal', 'kÃ¶k', 'gÃ¼l', 'papatya', 'lale',
                'karanfil', 'menekÅŸe', 'Ã§am', 'meÅŸe', 'kavak', 'Ã§Ä±nar', 'fidan',
                
                // Oyunlar ve eÄŸlence
                'oyun', 'top', 'bebek', 'oyuncak', 'saklambaÃ§', 'koÅŸmaca', 'bilmece',
                'masal', 'hikaye', 'ÅŸarkÄ±', 'tÃ¼rkÃ¼', 'dans', 'oyun', 'eÄŸlence',
                
                // MÃ¼zik aletleri
                'piyano', 'gitar', 'flÃ¼t', 'davul', 'keman', 'baÄŸlama', 'kaval',
                'zurna', 'tambur', 'oud', 'nota', 'mÃ¼zik', 'melodi', 'ritim',
                
                // Yiyecek ve iÃ§ecek
                'ekmek', 'su', 'sÃ¼t', 'peynir', 'yoÄŸurt', 'bal', 'reÃ§el', 'tereyaÄŸÄ±',
                'Ã§orba', 'pilav', 'makarna', 'salata', 'meyve', 'sebze', 'et', 'tavuk',
                
                // Renkler
                'kÄ±rmÄ±zÄ±', 'mavi', 'yeÅŸil', 'sarÄ±', 'mor', 'turuncu', 'beyaz', 'siyah',
                'pembe', 'kahverengi', 'gri', 'lacivert', 'altÄ±n', 'gÃ¼mÃ¼ÅŸ',
                
                // SayÄ±lar
                'bir', 'iki', 'Ã¼Ã§', 'dÃ¶rt', 'beÅŸ', 'altÄ±', 'yedi', 'sekiz', 'dokuz', 'on',
                
                // Aile
                'anne', 'baba', 'kardeÅŸ', 'dede', 'nine', 'teyze', 'amca', 'hala', 'dayÄ±',
                'kuzen', 'yeÄŸen', 'torun', 'aile', 'akraba',
                
                // VÃ¼cut
                'baÅŸ', 'saÃ§', 'gÃ¶z', 'kulak', 'burun', 'aÄŸÄ±z', 'diÅŸ', 'dil', 'boyun',
                'kol', 'el', 'parmak', 'bacak', 'ayak', 'kalp', 'mide',
                
                // Duygular
                'mutlu', 'Ã¼zgÃ¼n', 'kÄ±zgÄ±n', 'ÅŸaÅŸkÄ±n', 'korkmuÅŸ', 'sevinÃ§li', 'heyecanlÄ±',
                'sakin', 'yorgun', 'aÃ§', 'tok', 'susuz', 'hasta', 'saÄŸlÄ±klÄ±'
            ];

            // TÃ¼rkÃ§e kelime uygunluk kontrolÃ¼
            function isValidTurkishWord(word) {
                const cleanWord = word.trim().toLowerCase();
                
                // BoÅŸ kelime kontrolÃ¼
                if (!cleanWord || cleanWord.length < 2) {
                    return { valid: false, reason: 'Kelime Ã§ok kÄ±sa (en az 2 harf olmalÄ±)' };
                }
                
                // TÃ¼rkÃ§e karakterler
                const turkishChars = /^[a-zÃ¼Ã§ÄŸÄ±Ã¶ÅŸabcdefghijklmnopqrstuvwxyz\s]+$/i;
                if (!turkishChars.test(cleanWord)) {
                    return { valid: false, reason: 'Sadece TÃ¼rkÃ§e harfler kullanÄ±n' };
                }
                
                // YasaklÄ±/uygunsuz kelimeler listesi
                const inappropriateWords = [
                    // Cinsel iÃ§erikli kelimeler
                    'sik', 'sÄ±k', 'sex', 'seks', 'am', 'amcÄ±k', 'amcik', 'gÃ¶t', 'meme', 'penis', 'vajina',
                    'taÅŸak', 'taÅŸÅŸak', 'yarrak', 'yarraÄŸ', 'sÃ¼l', 'dÃ¶l', 'sikim', 'sikik', 'sikiÅŸ', 'sikis',
                    'gotten', 'gÃ¶tÃ¼n', 'gÃ¶te', 'amÄ±n', 'ama', 'amÄ±', 'memek', 'memen', 'memesi',
                    
                    // KÃ¼fÃ¼r kelimeleri
                    'oÃ§', 'oc', 'piÃ§', 'pic', 'ibne', 'gay', 'lezbiyen', 'fahiÅŸe', 'fahise',
                    'orospu', 'orospÄ±', 'kaltak', 'sÃ¼rtÃ¼k', 'surtuk', 'pezevenk', 'gavat',
                    'zÃ¼ppe', 'zÄ±kkÄ±m', 'kerhaneci', 'pimp',
                    
                    // Argo ve kaba kelimeler
                    'aptal', 'salak', 'gerizekalÄ±', 'mal', 'ahmak', 'budala', 'dangalak',
                    'bok', 'kaka', 'Ã§iÅŸ', 'cis', 'pislik', 'leÅŸ', 'les', 'Ã§Ã¼rÃ¼k',
                    'iÄŸrenÃ§', 'kusma', 'kustu', 'kustum', 'osuruk', 'gaz', 'geÄŸirme',
                    
                    // KÃ¶tÃ¼ kelimeler
                    'lanet', 'kahretsin', 'cehennem', 'ÅŸeytan', 'allah', 'tanrÄ±',
                    'din', 'peygamber', 'namaz', 'oruÃ§', 'hac', 'zakat',
                    
                    // AnlamsÄ±z kÄ±sa kelimeler
                    'ah', 'oh', 'uh', 'eh', 'ih', 'hÄ±h', 'hah', 'heh', 'hih',
                    'lan', 'ulan', 'moruk', 'aga', 'reis', 'kanka',
                    
                    // Åiddet iÃ§erikli
                    'Ã¶ldÃ¼r', 'Ã¶l', 'gebertmek', 'gebersin', 'kes', 'doÄŸra',
                    'vur', 'vurmak', 'dayak', 'dÃ¶vmek', 'saldÄ±r', 'kavga'
                ];
                
                if (inappropriateWords.includes(cleanWord)) {
                    return { valid: false, reason: 'Bu kelime uygun deÄŸil' };
                }
                
                // Ã‡ok uzun kelime kontrolÃ¼
                if (cleanWord.length > 20) {
                    return { valid: false, reason: 'Kelime Ã§ok uzun (en fazla 20 harf)' };
                }
                
                // SÃ¼rekli aynÄ± harf tekrarÄ± kontrolÃ¼
                const repeatingPattern = /(.)\1{3,}/;
                if (repeatingPattern.test(cleanWord)) {
                    return { valid: false, reason: 'AynÄ± harfin 4 kez Ã¼st Ã¼ste tekrarÄ± uygun deÄŸil' };
                }
                
                return { valid: true };
            }

            // Hece uygunluk kontrolÃ¼
            function isValidTurkishSyllable(syllable) {
                const cleanSyllable = syllable.trim().toLowerCase();
                
                if (!cleanSyllable) {
                    return { valid: false, reason: 'BoÅŸ hece' };
                }
                
                if (cleanSyllable.length > 8) {
                    return { valid: false, reason: 'Hece Ã§ok uzun' };
                }
                
                // TÃ¼rkÃ§e karakterler kontrolÃ¼
                const turkishChars = /^[a-zÃ¼Ã§ÄŸÄ±Ã¶ÅŸabcdefghijklmnopqrstuvwxyz]+$/i;
                if (!turkishChars.test(cleanSyllable)) {
                    return { valid: false, reason: 'Hecede sadece TÃ¼rkÃ§e harfler olmalÄ±' };
                }
                
                // Uygunsuz heceler listesi
                const inappropriateSyllables = [
                    // Cinsel iÃ§erikli heceler
                    'sik', 'sÄ±k', 'sex', 'seks', 'am', 'gÃ¶t', 'meme', 'penis', 'vajina',
                    'amcÄ±k', 'amcik', 'taÅŸak', 'taÅŸÅŸak', 'yarrak', 'yarraÄŸ', 'sÃ¼l', 'dÃ¶l',
                    'sikim', 'sikik', 'gotten', 'gÃ¶tÃ¼n', 'gÃ¶te', 'amÄ±n', 'ama', 'amÄ±',
                    'memek', 'memen', 'memesi', 'siki', 'sikti', 'sikis', 'sikiÅŸ',
                    
                    // KÃ¼fÃ¼r heceleri
                    'oÃ§', 'oc', 'piÃ§', 'pic', 'ibne', 'top', 'gay', 'lezbiyen',
                    'fahiÅŸe', 'fahise', 'orospÄ±', 'orospu', 'kaltak', 'sÃ¼rtÃ¼k', 'surtuk',
                    'pezevenk', 'pimp', 'kerhaneci', 'gavat', 'zÃ¼ppe', 'zÄ±kkÄ±m',
                    
                    // Argo ve kaba heceler
                    'bok', 'kaka', 'Ã§iÅŸ', 'cis', 'iÅŸe', 'pislik', 'pis', 'leÅŸ', 'les',
                    'Ã§Ã¼rÃ¼k', 'kÃ¶tÃ¼', 'iÄŸrenÃ§', 'mide', 'kusma', 'kustu', 'kustum',
                    
                    // AnlamsÄ±z kaba sesler
                    'pÄ±rt', 'pirt', 'osur', 'gaz', 'geÄŸir', 'gegir', 'tÃ¼kÃ¼r', 'tukur',
                    'hÄ±rr', 'grrr', 'Ã¶fff', 'puff', 'Ä±yyy', 'iyy', 'ekÅŸi',
                    
                    // DiÄŸer uygunsuz terimler
                    'salak', 'aptal', 'mal', 'geri', 'ahmak', 'budala', 'dangalak',
                    'lanet', 'ÅŸeytan', 'cehennem', 'kahret', 'lan', 'ulan', 'moruk',
                    
                    // KÄ±sa anlamsÄ±z sesler
                    'hÄ±h', 'hah', 'heh', 'hih', 'hooo', 'haaa', 'heee', 'hiiii'
                ];
                
                if (inappropriateSyllables.includes(cleanSyllable)) {
                    return { valid: false, reason: 'Bu hece Ã§ocuklar iÃ§in uygun deÄŸil' };
                }
                
                // KÄ±smi eÅŸleÅŸme kontrolÃ¼ (uygunsuz kelime parÃ§alarÄ±)
                const partialMatches = ['sik', 'am', 'gÃ¶t', 'meme', 'bok', 'piÃ§', 'oÃ§'];
                for (let inappropriate of partialMatches) {
                    if (cleanSyllable.includes(inappropriate) && cleanSyllable.length <= inappropriate.length + 2) {
                        return { valid: false, reason: 'Bu hece Ã§ocuklar iÃ§in uygun deÄŸil' };
                    }
                }
                
                return { valid: true };
            }

            // Kelime ve hecelerini kontrol et - uygunsuz varsa deÄŸiÅŸtir
            function validateAndFixWord(wordObj) {
                const word = wordObj.word;
                
                // Kelime kontrolÃ¼
                const wordValidation = isValidTurkishWord(word);
                if (!wordValidation.valid) {
                    console.warn(`âš ï¸ Uygunsuz kelime tespit edildi ve deÄŸiÅŸtirildi: ${word}`);
                    return null; // Bu kelimeyi kullanma
                }
                
                // Her heceyi kontrol et
                for (let syllable of wordObj.syllables) {
                    const syllableValidation = isValidTurkishSyllable(syllable.text);
                    if (!syllableValidation.valid) {
                        console.warn(`âš ï¸ Uygunsuz hece tespit edildi, kelime deÄŸiÅŸtirildi: ${word}`);
                        return null; // Bu kelimeyi kullanma
                    }
                }
                
                return wordObj; // Kelime gÃ¼venli
            }

            // GÃ¼venli rastgele kelime seÃ§
            function getRandomSafeWord() {
                const maxAttempts = 50; // Sonsuz dÃ¶ngÃ¼yÃ¼ Ã¶nle
                let attempts = 0;
                
                while (attempts < maxAttempts) {
                    const randomIndex = Math.floor(Math.random() * randomWordPool.length);
                    const selectedWord = randomWordPool[randomIndex];
                    
                    // Kelime kontrolÃ¼
                    const wordValidation = isValidTurkishWord(selectedWord);
                    if (!wordValidation.valid) {
                        attempts++;
                        continue;
                    }
                    
                    // Heceleri oluÅŸtur
                    const syllables = automaticSyllableBreak(selectedWord);
                    
                    // Her heceyi kontrol et
                    let allSyllablesValid = true;
                    for (let syllable of syllables) {
                        const syllableValidation = isValidTurkishSyllable(syllable);
                        if (!syllableValidation.valid) {
                            allSyllablesValid = false;
                            break;
                        }
                    }
                    
                    if (allSyllablesValid) {
                        // GÃ¼venli kelime bulundu
                        const syllableArray = syllables.map((syl, index) => ({
                            text: syl,
                            color: index % 2 === 0 ? 'red' : 'blue'
                        }));

                        return {
                            word: toTurkishUpperCase(selectedWord),
                            syllables: syllableArray,
                            dateAdded: new Date().toISOString(),
                            isRandom: true
                        };
                    }
                    
                    attempts++;
                }
                
                // GÃ¼venli kelime bulunamadÄ±, varsayÄ±lan gÃ¼venli kelimelerden birini kullan
                const safeDefaults = ['elma', 'kitap', 'gÃ¼neÅŸ', 'Ã§iÃ§ek', 'kuÅŸ'];
                const safeWord = safeDefaults[Math.floor(Math.random() * safeDefaults.length)];
                const syllables = automaticSyllableBreak(safeWord);
                const syllableArray = syllables.map((syl, index) => ({
                    text: syl,
                    color: index % 2 === 0 ? 'red' : 'blue'
                }));

                return {
                    word: toTurkishUpperCase(safeWord),
                    syllables: syllableArray,
                    dateAdded: new Date().toISOString(),
                    isRandom: true,
                    isSafeDefault: true
                };
            }

            // Mevcut kelimeleri denetle ve temizle
            function validateCurrentWords() {
                const originalCount = currentWords.length;
                currentWords = currentWords.filter(wordObj => {
                    const validated = validateAndFixWord(wordObj);
                    return validated !== null;
                });
                
                const removedCount = originalCount - currentWords.length;
                if (removedCount > 0) {
                    console.log(`ğŸ›¡ï¸ ${removedCount} uygunsuz kelime tespit edildi ve kaldÄ±rÄ±ldÄ±`);
                    
                    // KaldÄ±rÄ±lan kelimeler yerine gÃ¼venli kelimeler ekle
                    for (let i = 0; i < removedCount; i++) {
                        const safeWord = getRandomSafeWord();
                        currentWords.push(safeWord);
                    }
                    
                    // GÃ¼ncellemeleri kaydet
                    saveWordsToStorage();
                    renderWords();
                    updateCurrentWordsList();
                }
            }

            // Rastgele kelime oluÅŸtur fonksiyonu
            function generateRandomWords(askConfirmation = true) {
                if (askConfirmation && !confirm('ğŸ² Mevcut kelimeler temizlenip 10 yeni rastgele kelime eklenecek. Devam etmek istiyor musunuz?')) {
                    return;
                }

                // Ã–nce mevcut kelimeleri temizle
                currentWords = [];
                
                let addedCount = 0;
                const addedWords = [];

                // 10 gÃ¼venli kelime ekle
                for (let i = 0; i < 10; i++) {
                    const safeWord = getRandomSafeWord();
                    
                    currentWords.push(safeWord);
                    addedWords.push(safeWord.word);
                    addedCount++;
                }

                // Kaydet ve gÃ¼ncelle
                saveWordsToStorage();
                renderWords();
                updateCurrentWordsList();

                // BaÅŸarÄ± mesajÄ± gÃ¶ster
                const message = `âœ… ${addedCount} rastgele kelime eklendi:\n${addedWords.join(', ')}`;
                
                // KÄ±sa bildirim gÃ¶ster
                const notification = document.createElement('div');
                notification.textContent = `ğŸ² ${addedCount} rastgele kelime eklendi!`;
                notification.className = 'fixed top-4 right-4 bg-purple-500 text-white px-4 py-2 rounded-md text-sm z-50 shadow-lg';
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 3000);

                console.log(message);
            }

            // EÄŸlenceli yenileme fonksiyonu - Rastgele kelimeler oluÅŸtur
            function funRefresh() {
                // Buton animasyonunu baÅŸlat
                funRefreshBtn.classList.add('animate-bounce');
                funRefreshBtn.textContent = 'ğŸ­ Yenileniyor...';
                funRefreshBtn.disabled = true;
                
                // Ã–nce mevcut kelimeleri temizle ve rastgele yenilerini oluÅŸtur (sessizce)
                generateRandomWords(false);
                
                // Renkli geÃ§iÅŸ efekti
                const colors = [
                    'from-red-500 to-yellow-600',
                    'from-blue-500 to-green-600', 
                    'from-purple-500 to-pink-600',
                    'from-indigo-500 to-purple-600',
                    'from-green-500 to-blue-600'
                ];
                
                let colorIndex = 0;
                const colorInterval = setInterval(() => {
                    funRefreshBtn.className = funRefreshBtn.className.replace(/from-\w+-\d+\s+to-\w+-\d+/, colors[colorIndex]);
                    colorIndex = (colorIndex + 1) % colors.length;
                }, 200);

                // KartlarÄ± yavaÅŸÃ§a kaybet efekti
                const cards = document.querySelectorAll('#words-container > div');
                cards.forEach((card, index) => {
                    setTimeout(() => {
                        card.style.transform = 'scale(0.8) rotate(10deg)';
                        card.style.opacity = '0.3';
                    }, index * 100);
                });

                // 2 saniye sonra yenileme iÅŸlemini yap
                setTimeout(() => {
                    clearInterval(colorInterval);
                    
                    // Kelimeleri yeniden render et
                    renderWords();
                    
                    // Yeni kartlarÄ± yavaÅŸÃ§a gÃ¶ster
                    setTimeout(() => {
                        const newCards = document.querySelectorAll('#words-container > div');
                        newCards.forEach((card, index) => {
                            card.style.transform = 'scale(0.5)';
                            card.style.opacity = '0';
                            setTimeout(() => {
                                card.style.transition = 'all 0.5s ease-out';
                                card.style.transform = 'scale(1)';
                                card.style.opacity = '1';
                            }, index * 150);
                        });
                    }, 100);
                    
                    // Butonu eski haline getir
                    setTimeout(() => {
                        funRefreshBtn.classList.remove('animate-bounce');
                        funRefreshBtn.textContent = 'ğŸŒŸ Kelimeleri Yenile! ğŸ¨';
                        funRefreshBtn.disabled = false;
                        funRefreshBtn.className = 'bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transform transition-all duration-200 hover:scale-105 active:scale-95 animate-pulse';
                        
                        // BaÅŸarÄ± mesajÄ± gÃ¶ster
                        const successMsg = document.createElement('div');
                        successMsg.textContent = 'âœ¨ Kelimeler yenilendi! âœ¨';
                        successMsg.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-green-400 to-blue-500 text-white px-6 py-3 rounded-full text-lg font-bold shadow-lg z-50 animate-bounce';
                        document.body.appendChild(successMsg);
                        
                        setTimeout(() => {
                            if (successMsg.parentNode) {
                                successMsg.style.transition = 'all 0.5s ease-out';
                                successMsg.style.transform = 'translate(-50%, -100px) scale(0.5)';
                                successMsg.style.opacity = '0';
                                setTimeout(() => {
                                    successMsg.parentNode.removeChild(successMsg);
                                }, 500);
                            }
                        }, 2000);
                        
                    }, 1000);
                    
                }, 2000);
            }

            // GeliÅŸmiÅŸ kelime yÃ¶netimi fonksiyonlarÄ±
            function loadWordsFromStorage() {
                try {
                    const stored = localStorage.getItem('turkishWords');
                    if (stored && stored.trim() !== '') {
                        const parsedWords = JSON.parse(stored);
                        if (Array.isArray(parsedWords) && parsedWords.length > 0) {
                            currentWords = parsedWords;
                            console.log(`âœ… ${currentWords.length} kelime localStorage'dan yÃ¼klendi`);
                            
                            // YÃ¼klenen kelimeleri denetle ve temizle
                            validateCurrentWords();
                            return;
                        }
                    }
                } catch (e) {
                    console.warn('âš ï¸ localStorage okuma hatasÄ±:', e);
                }
                
                // VarsayÄ±lan kelimeleri yÃ¼kle
                currentWords = [...defaultWords];
                saveWordsToStorage(); // Ä°lk kez varsayÄ±lanlarÄ± kaydet
                console.log('ğŸ“ VarsayÄ±lan kelimeler yÃ¼klendi ve kaydedildi');
                
                // VarsayÄ±lan kelimeleri de denetle
                validateCurrentWords();
            }

            function saveWordsToStorage() {
                try {
                    const dataToSave = JSON.stringify(currentWords);
                    localStorage.setItem('turkishWords', dataToSave);
                    localStorage.setItem('turkishWords_backup', dataToSave); // Yedek kopya
                    localStorage.setItem('turkishWords_timestamp', new Date().toISOString());
                    console.log(`ğŸ’¾ ${currentWords.length} kelime kaydedildi`);
                    
                    // KayÄ±t baÅŸarÄ± mesajÄ± gÃ¶ster
                    const saveIndicator = document.createElement('div');
                    saveIndicator.textContent = 'âœ… Kaydedildi';
                    saveIndicator.className = 'fixed top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-md text-sm z-50';
                    document.body.appendChild(saveIndicator);
                    
                    setTimeout(() => {
                        if (saveIndicator.parentNode) {
                            saveIndicator.parentNode.removeChild(saveIndicator);
                        }
                    }, 2000);
                    
                } catch (e) {
                    console.error('âŒ localStorage kayÄ±t hatasÄ±:', e);
                    alert('Kelimeler kaydedilemedi! TarayÄ±cÄ± depolama alanÄ± dolu olabilir.');
                }
            }

            // Yedekten geri yÃ¼kleme fonksiyonu
            function restoreFromBackup() {
                try {
                    const backup = localStorage.getItem('turkishWords_backup');
                    if (backup) {
                        const parsedBackup = JSON.parse(backup);
                        if (Array.isArray(parsedBackup)) {
                            currentWords = parsedBackup;
                            saveWordsToStorage();
                            renderWords();
                            updateCurrentWordsList();
                            console.log('ğŸ”„ Yedekten geri yÃ¼klendi');
                            return true;
                        }
                    }
                } catch (e) {
                    console.error('âŒ Yedek geri yÃ¼kleme hatasÄ±:', e);
                }
                return false;
            }

            function addNewWord(word, syllables) {
                if (!word.trim() || !syllables.trim()) {
                    alert('LÃ¼tfen kelime ve hecelerini girin!');
                    return false;
                }

                // Kelime uygunluk kontrolÃ¼
                const wordValidation = isValidTurkishWord(word.trim());
                if (!wordValidation.valid) {
                    alert(`âŒ ${wordValidation.reason}`);
                    return false;
                }

                // AynÄ± kelime var mÄ± kontrol et
                const existingWord = currentWords.find(w => w.word.toLowerCase() === word.trim().toLowerCase());
                if (existingWord) {
                    if (!confirm(`"${word.trim()}" kelimesi zaten var. Yine de eklemek istiyor musunuz?`)) {
                        return false;
                    }
                }

                // Heceleri ayÄ±r ve kontrol et
                const syllableTexts = syllables.split(',').map(syl => syl.trim()).filter(syl => syl !== '');
                
                // Her heceyi kontrol et
                for (let i = 0; i < syllableTexts.length; i++) {
                    const syllableValidation = isValidTurkishSyllable(syllableTexts[i]);
                    if (!syllableValidation.valid) {
                        alert(`âŒ ${syllableValidation.reason}`);
                        return false;
                    }
                }

                const syllableArray = syllableTexts.map((syl, index) => ({
                    text: syl,
                    color: index % 2 === 0 ? 'red' : 'blue'
                }));

                if (syllableArray.length === 0) {
                    alert('GeÃ§erli heceler girin!');
                    return false;
                }

                const newWord = {
                    word: word.trim(),
                    syllables: syllableArray,
                    dateAdded: new Date().toISOString()
                };

                currentWords.push(newWord);
                saveWordsToStorage(); // Otomatik kayÄ±t
                renderWords();
                updateCurrentWordsList();
                
                // Input'larÄ± temizle
                wordInput.value = '';
                syllablesInput.value = '';
                
                console.log(`â• Yeni kelime eklendi: ${newWord.word}`);
                return true;
            }

            function resetToDefaultWords() {
                currentWords = [...defaultWords];
                saveWordsToStorage();
                renderWords();
                updateCurrentWordsList();
            }

            function clearAllWords() {
                if (confirm('TÃ¼m kelimeleri silmek istediÄŸinizden emin misiniz?')) {
                    currentWords = [];
                    saveWordsToStorage();
                    renderWords();
                    updateCurrentWordsList();
                }
            }

            function deleteWord(index) {
                if (confirm('Bu kelimeyi silmek istediÄŸinizden emin misiniz?')) {
                    currentWords.splice(index, 1);
                    saveWordsToStorage();
                    renderWords();
                    updateCurrentWordsList();
                }
            }

            function updateCurrentWordsList() {
                currentWordsList.innerHTML = '';
                
                // Kelime sayÄ±sÄ±nÄ± gÃ¼ncelle
                wordCount.textContent = `${currentWords.length} kelime`;
                
                if (currentWords.length === 0) {
                    currentWordsList.innerHTML = '<p class="text-gray-500 text-sm">HenÃ¼z kelime yok. YukarÄ±dan kelime ekleyin.</p>';
                    return;
                }

                currentWords.forEach((wordData, index) => {
                    const wordItem = document.createElement('div');
                    wordItem.className = 'flex justify-between items-center py-1 px-2 hover:bg-gray-100 rounded';
                    
                    const wordText = document.createElement('span');
                    wordText.textContent = `${wordData.word} (${wordData.syllables.map(s => s.text).join('-')})`;
                    wordText.className = 'text-sm';
                    
                    const deleteBtn = document.createElement('button');
                    deleteBtn.innerHTML = 'ğŸ—‘ï¸';
                    deleteBtn.className = 'text-red-500 hover:text-red-700 text-sm';
                    deleteBtn.title = 'Bu kelimeyi sil';
                    deleteBtn.onclick = () => deleteWord(index);
                    
                    wordItem.appendChild(wordText);
                    wordItem.appendChild(deleteBtn);
                    currentWordsList.appendChild(wordItem);
                });
            }

            // KayÄ±t durumunu kontrol et
            function checkStorageStatus() {
                try {
                    const testKey = 'storage_test';
                    localStorage.setItem(testKey, 'test');
                    localStorage.removeItem(testKey);
                    
                    const lastSave = localStorage.getItem('turkishWords_timestamp');
                    if (lastSave) {
                        const saveDate = new Date(lastSave);
                        storageStatus.textContent = `ğŸ’¾ Son kayÄ±t: ${saveDate.toLocaleString('tr-TR')}`;
                        storageStatus.style.color = '#10b981';
                    } else {
                        storageStatus.textContent = 'ğŸ’¾ Otomatik kayÄ±t aktif';
                        storageStatus.style.color = '#3b82f6';
                    }
                } catch (e) {
                    storageStatus.textContent = 'âš ï¸ KayÄ±t sorunu: localStorage kullanÄ±lamÄ±yor';
                    storageStatus.style.color = '#ef4444';
                }
            }

            // Kelime kartlarÄ±nÄ± oluÅŸtur
            function renderWords() {
                wordsContainer.innerHTML = '';

                currentWords.forEach(wordData => {
                    const wordCard = document.createElement('div');
                    wordCard.className = 'bg-[#f8fafa] rounded-2xl shadow-lg p-6 flex justify-center items-center flex-wrap gap-x-1 min-h-[120px]';

                    wordData.syllables.forEach(syllable => {
                        const syllableSpan = document.createElement('span');
                        syllableSpan.textContent = syllable.text;
                        syllableSpan.dataset.text = syllable.text;
                        
                        const colorClass = syllable.color === 'red' ? 'text-red-600' : 'text-blue-600';
                        
                        syllableSpan.className = `syllable text-5xl sm:text-6xl font-extrabold cursor-pointer transition-transform duration-150 ease-in-out active:scale-110 hover:scale-105 ${colorClass}`;
                        
                        wordCard.appendChild(syllableSpan);
                    });

                    wordsContainer.appendChild(wordCard);
                });
            }

            // Basit ses yÃ¼kleme fonksiyonu
            function loadVoices() {
                const voices = window.speechSynthesis.getVoices();
                
                if (voices.length === 0) {
                    voiceStatus.textContent = `ğŸ“¢ Sesler yÃ¼kleniyor... (Deneme ${voiceLoadAttempts + 1})`;
                    voiceStatus.style.color = '#f59e0b';
                    return false;
                }

                allVoices = voices;
                voiceSelect.innerHTML = '';
                
                // TÃ¼rkÃ§e sesleri Ã¶nce ekle
                const turkishVoices = voices
                    .filter(voice => voice.lang.startsWith('tr'))
                    .sort((a, b) => {
                        // Emel ve Zira Ã¶nce gelsin
                        const aName = a.name.toLowerCase();
                        const bName = b.name.toLowerCase();
                        if (aName.includes('emel')) return -1;
                        if (bName.includes('emel')) return 1;
                        if (aName.includes('zira')) return -1;
                        if (bName.includes('zira')) return 1;
                        return 0;
                    });
                
                const otherVoices = voices.filter(voice => !voice.lang.startsWith('tr'));
                
                if (turkishVoices.length > 0) {
                    const turkishGroup = document.createElement('optgroup');
                    turkishGroup.label = 'ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e Sesler';
                    
                    turkishVoices.forEach((voice) => {
                        const option = document.createElement('option');
                        option.value = `${voice.name}|${voice.lang}`;
                        let displayName = voice.name;
                        
                        // Ã–zel isimlendirme
                        if (voice.name.toLowerCase().includes('emel')) {
                            displayName += ' â­ Ã–NERÄ°LEN';
                        } else if (voice.name.toLowerCase().includes('zira')) {
                            displayName += ' ğŸŒŸ KALÄ°TELÄ°';
                        }
                        
                        option.textContent = displayName;
                        turkishGroup.appendChild(option);
                    });
                    voiceSelect.appendChild(turkishGroup);
                    
                    // Ä°lk TÃ¼rkÃ§e sesi seÃ§
                    selectedVoice = turkishVoices[0];
                    voiceSelect.value = `${turkishVoices[0].name}|${turkishVoices[0].lang}`;
                }
                
                if (otherVoices.length > 0) {
                    const otherGroup = document.createElement('optgroup');
                    otherGroup.label = 'ğŸŒ DiÄŸer Diller';
                    
                    otherVoices.forEach((voice) => {
                        const option = document.createElement('option');
                        option.value = `${voice.name}|${voice.lang}`;
                        option.textContent = `${voice.name} (${voice.lang})`;
                        otherGroup.appendChild(option);
                    });
                    voiceSelect.appendChild(otherGroup);
                }
                
                // Durum gÃ¼ncellemesi
                const turkishCount = turkishVoices.length;
                const totalCount = voices.length;
                voiceStatus.textContent = `âœ… ${totalCount} ses yÃ¼klendi (${turkishCount} TÃ¼rkÃ§e)`;
                voiceStatus.style.color = '#10b981';
                
                return true;
            }

            // Ses seÃ§imi deÄŸiÅŸtiÄŸinde
            voiceSelect.addEventListener('change', (e) => {
                speechSynthesis.cancel();
                
                const selectedValue = e.target.value;
                if (selectedValue && selectedValue.includes('|')) {
                    const [voiceName, voiceLang] = selectedValue.split('|');
                    selectedVoice = allVoices.find(voice => 
                        voice.name === voiceName && voice.lang === voiceLang
                    );
                }
            });

            // Sesleri yenile butonu
            refreshVoicesBtn.addEventListener('click', () => {
                voiceLoadAttempts = 0;
                voiceStatus.textContent = 'ğŸ”„ Sesler yeniden yÃ¼kleniyor...';
                voiceStatus.style.color = '#f59e0b';
                
                // BoÅŸ utterance ile sesleri tetikle
                const utterance = new SpeechSynthesisUtterance('');
                speechSynthesis.speak(utterance);
                speechSynthesis.cancel();
                
                setTimeout(() => {
                    tryLoadVoices();
                }, 300);
            });

            // Kelime editÃ¶rÃ¼ toggle
            toggleWordEditor.addEventListener('click', () => {
                if (wordEditor.classList.contains('hidden')) {
                    wordEditor.classList.remove('hidden');
                    toggleWordEditor.textContent = 'ğŸ“– EditÃ¶rÃ¼ Kapat';
                    updateCurrentWordsList();
                } else {
                    wordEditor.classList.add('hidden');
                    toggleWordEditor.textContent = 'âœï¸ Kelimeleri DÃ¼zenle';
                }
            });

            // Kelime ekleme
            addWordBtn.addEventListener('click', () => {
                addNewWord(wordInput.value, syllablesInput.value);
            });

            // Rastgele kelime oluÅŸtur
            generateRandomWordsBtn.addEventListener('click', () => {
                generateRandomWords(true); // Onay iste
            });

            // Enter tuÅŸu ile kelime ekleme
            syllablesInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    addNewWord(wordInput.value, syllablesInput.value);
                }
            });

            // Otomatik heceleme butonu
            autoSyllableBtn.addEventListener('click', () => {
                const word = wordInput.value.trim();
                if (!word) {
                    alert('Ã–nce bir kelime girin!');
                    wordInput.focus();
                    return;
                }

                const syllables = automaticSyllableBreak(word);
                syllablesInput.value = syllables.join(',');
                
                // UyarÄ± mesajÄ±nÄ± gÃ¶ster
                syllableWarning.classList.remove('hidden');
                
                // UyarÄ±yÄ± 5 saniye sonra gizle
                setTimeout(() => {
                    syllableWarning.classList.add('hidden');
                }, 5000);
                
                // Focus'u heceler input'una ver
                syllablesInput.focus();
                syllablesInput.select();
            });

            // Kelime input'u deÄŸiÅŸtiÄŸinde uyarÄ±yÄ± gizle
            wordInput.addEventListener('input', () => {
                syllableWarning.classList.add('hidden');
            });

            // VarsayÄ±lan kelimeleri yÃ¼kle
            resetWordsBtn.addEventListener('click', () => {
                if (confirm('VarsayÄ±lan kelimeleri yÃ¼klemek istediÄŸinizden emin misiniz? Mevcut kelimeler kaybolacak.')) {
                    resetToDefaultWords();
                }
            });

            // TÃ¼m kelimeleri temizle
            clearAllWordsBtn.addEventListener('click', () => {
                clearAllWords();
            });

            // EÄŸlenceli yenileme
            funRefreshBtn.addEventListener('click', () => {
                funRefresh();
            });

            // Manuel kayÄ±t
            manualSaveBtn.addEventListener('click', () => {
                saveWordsToStorage();
                checkStorageStatus();
            });

            // Sayfa kapatÄ±lÄ±rken otomatik kayÄ±t
            window.addEventListener('beforeunload', () => {
                saveWordsToStorage();
            });

            // Periyodik otomatik kayÄ±t (her 30 saniyede)
            setInterval(() => {
                if (currentWords.length > 0) {
                    saveWordsToStorage();
                    checkStorageStatus();
                }
            }, 30000);

            // HÄ±z seÃ§imi deÄŸiÅŸtiÄŸinde
            speedSelect.addEventListener('change', (e) => {
                speechRate = parseFloat(e.target.value);
            });

            // Ses test butonu
            testVoiceBtn.addEventListener('click', () => {
                playSyllable('Merhaba, bu bir ses testidir.');
            });

            // Ses yÃ¼kleme deneme fonksiyonu
            function tryLoadVoices() {
                voiceLoadAttempts++;
                
                if (loadVoices()) {
                    // BaÅŸarÄ±lÄ±
                    return;
                }
                
                // BaÅŸarÄ±sÄ±z, tekrar dene
                if (voiceLoadAttempts < 10) {
                    setTimeout(tryLoadVoices, 500);
                } else {
                    voiceStatus.textContent = 'âŒ Sesler yÃ¼klenemedi - LÃ¼tfen "Sesleri Yenile" butonunu deneyin';
                    voiceStatus.style.color = '#ef4444';
                }
            }

            // BaÅŸlangÄ±Ã§
            tryLoadVoices();
            
            // Ses deÄŸiÅŸikliklerini dinle
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = () => {
                    if (voiceLoadAttempts < 10) {
                        loadVoices();
                    }
                };
            }

            function playSyllable(text) {
                // Mevcut konuÅŸmayÄ± durdur
                speechSynthesis.cancel();

                if (!selectedVoice) {
                    voiceStatus.textContent = 'âš ï¸ LÃ¼tfen bir ses seÃ§in';
                    voiceStatus.style.color = '#ef4444';
                    return;
                }

                // TÃ¼rkÃ§e karakterler iÃ§in dÃ¼zeltme
                let correctedText = text;
                if (selectedVoice.lang && selectedVoice.lang.startsWith('tr')) {
                    correctedText = text
                        .replace(/ÄŸ/g, 'ÄŸ')
                        .replace(/ÅŸ/g, 'ÅŸ')
                        .replace(/Ã§/g, 'Ã§')
                        .replace(/Ä±/g, 'Ä±')
                        .replace(/Ã¶/g, 'Ã¶')
                        .replace(/Ã¼/g, 'Ã¼');
                }

                const utterance = new SpeechSynthesisUtterance(correctedText);
                
                // Ses ayarlarÄ±
                utterance.voice = selectedVoice;
                utterance.lang = selectedVoice.lang || 'tr-TR';
                utterance.rate = speechRate;
                utterance.pitch = selectedVoice.lang && selectedVoice.lang.startsWith('tr') ? 1.0 : 1.1;
                utterance.volume = 0.9;
                
                // Hata yakalama
                utterance.onerror = (event) => {
                    voiceStatus.textContent = 'âŒ Ses Ã§alma hatasÄ±';
                    voiceStatus.style.color = '#ef4444';
                    console.error('Speech synthesis error:', event);
                };
                
                utterance.onstart = () => {
                    voiceStatus.textContent = 'ğŸ”Š Ses Ã§alÄ±nÄ±yor...';
                    voiceStatus.style.color = '#3b82f6';
                };
                
                utterance.onend = () => {
                    voiceStatus.textContent = `âœ… ${allVoices.length} ses hazÄ±r`;
                    voiceStatus.style.color = '#10b981';
                };
                
                speechSynthesis.speak(utterance);
            }

            // BaÅŸlangÄ±Ã§ - kelimeleri yÃ¼kle ve sesleri hazÄ±rla
            loadWordsFromStorage();
            
            // BaÅŸlangÄ±Ã§ta da gÃ¼venlik denetimi yap
            console.log('ğŸ›¡ï¸ Uygulama baÅŸlangÄ±cÄ±nda gÃ¼venlik denetimi yapÄ±lÄ±yor...');
            validateCurrentWords();
            
            renderWords();
            updateCurrentWordsList();
            checkStorageStatus();
            tryLoadVoices();
            
            // Ses deÄŸiÅŸikliklerini dinle
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = () => {
                    if (voiceLoadAttempts < 10) {
                        loadVoices();
                    }
                };
            }

            // Use event delegation for handling clicks on any syllable
            wordsContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('syllable')) {
                    const textToSpeak = e.target.dataset.text;
                    if (textToSpeak) {
                        playSyllable(textToSpeak);
                    }
                }
            });
        });
    </script>
</body>
</html>
